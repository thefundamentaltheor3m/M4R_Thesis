\section{The Scope of this Project}

% Ask how to word this... is "the author" ok??

In November 2023, the author had the privilege of meeting Maryna Viazovska while pursuing an exchange programme at the Swiss Federal Institute of Technology, Lausanne, where she is based. A discussion soon led to the initiation of a collaboration with Christopher Birkbeck, Seewoo Lee, and Gareth Ma, with invaluable assistance from Kevin Buzzard, Utensil Song, and Patrick Massot. On 31 May 2024, Viazovska formally announced at the ICMS workshop \textit{Formalisation of Mathematics: Workshop for Women and Mathematicians of Minority Gender} that a formalisation of her groundbreaking paper was in the works.

Viazovska's original paper~\cite{Viazovska8} is divided into five sections. The first section introduces sphere packings and develops basic theory; the second discusses linear programming bounds discovered by Cohn and Elkies~\cite[Theorem 3.1]{CohnElkies}; the third offers some background on the theory of modular forms; the fourth constructs two radial, Schwartz Fourier eigenfunctions with double zeroes at almost all points on the $E_8$ lattice; and finally, the fifth uses these eigenfunctions to construct the ``Magic Function'', a Schwartz function that satisfies the conditions of Cohn and Elkies's theorem to give an upper bound for all sphere packings in $\R^8$ that is equal to the density of the $E_8$ packing. Significant portions of the first two sections were formalised collaboratively in July and August 2024, and the third is actively being worked on by Birkbeck and Lee. This project focuses on formalising the fourth section of Viazovska's paper. The code written for this section is primarily the author's, and the contributions of others have been credited.

The primary objective of this thesis is to offer a mathematical exposition of the fourth section of Viazovska's original paper and explore how the choices she made over the course of her construction can be adapted in Lean. We then offer an overview of the author's contributions to the formalisation and discuss successes, roadblocks, and future challenges.

Viazovska's construction is based heavily on the theory of modular forms. While we will briefly discuss this rich subject at the intersection of analysis, algebra and number theory, we will not state more than what we need to understand the construction of Viazovska's magic function in \cite[\S 4]{Viazovska8}, keeping the focus of the informal and formal aspects of this project to the author's own contributions and expository insights. Furthermore, we will not discuss any more sphere packing theory than is necessary for general understanding. While we will study Cohn and Elkies's intermediate result in some detail, we will only do so to motivate Viazovska's construction, and progress in formalising it should not be viewed as being a part of this M4R.

Apart from references in the literature, given that this M4R is part of a formalisation project, we will make free and confident use of formalised code, particularly code found in \mathlib\ \cite{mathlib}. Such code is usually linked to \href{https://github.com/leanprover-community/mathlib4}{in this fashion}. We explicitly describe results that were not formalised by the author for the purposes of this projects as being previous formalisations, or otherwise make clear the distinction between the author's own contributions and those of others. We primarily use results formalised by Doll, van Doorn, Roblot, GouÃ«zel and Loeffler, and we credit them for their important contributions.

We end by reiterating that the formalisation is active, dynamic research. Significant developments are set to unfold immediately after the submission of this thesis, at the \textit{Big Proof 2025: Formalising Mathematics at Scale} event at Cambridge. The author has taken every effort to ensure the contents of this thesis are up-to-date, but points the reader to the \href{https://thefundamentaltheor3m.github.io/Sphere-Packing-Lean/blueprint/index.html}{blueprint}, which is public, and the \href{https://github.com/thefundamentaltheor3m/Sphere-Packing-Lean}{GitHub Repository}, which is set to be made public on 13 June, 2025, for the latest information.

\begin{comment}
    Given the limitations of the M4R assessed project paradigm, the author decided, at the very beginning, to use the first three sections of Viazovska's paper as a black box in order to reduce the number-theoretic burden on what already stood ahead of me as a daunting formalisation task. In particular, the author chose not to make this M4R a number theory project with an element of formalisation but a formalisation project involving ideas from number theory and complex analysis. This conscious but deliberate decision illustrates one of the many advantages of formal theorem proving: modularity with assurances. That is, one need not understand the entirety of a project to contribute to it: one simply needs to understand the parts one is formalising and how to use other ideas and results to one's end. In particular, the fact that the results one is using are formalised provides one with the assurance (that would otherwise only come with expertise) that those results are, indeed, correct. By bearing in mind the subtle yet immensely important fact that this project, at its core, is not a number theory project but a formalisation project, the reader will better understand the expository choices made by the author over the course of this report. There will be less emphasis on the motivations for constructing Viazovska's magic function in this manner (for there exist numerous excellent expository articles that explain this in detail \cite{a few things}) and more emphasis on the formalisation process, with reflections on the successes and failures of the formalisation strategies employed. We underscore insights gleaned from doing this that were not evident in the paper, one one occasion even identifying a small (but negligible) error that was published in the Annals. 
\end{comment}